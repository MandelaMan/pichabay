{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\React\\\\pichabay\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\React\\\\pichabay\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\React\\\\pichabay\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{createContext,useReducer,useEffect}from\"react\";import AppReducer from\"./AppReducer\";import axios from\"axios\";import{encryptData,decryptData,readJwt,addCookie,deleteCookie}from\"../utils/helpers\";import Cookies from\"js-cookie\";import{photographers}from\"../utils/data\";import{createBrowserHistory}from\"history\";import{jsx as _jsx}from\"react/jsx-runtime\";var initialState={isLoading:false,isLoggedIn:null,categories:[],counties:[],home_photographers:[],searched_photographers:[],photographers:[],user_info:{}};export var GlobalContext=/*#__PURE__*/createContext(initialState);export var GlobalProvider=function GlobalProvider(_ref){var children=_ref.children;var history=createBrowserHistory();var _useReducer=useReducer(AppReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var baseURL=\"http://localhost:81/kliks/v1/api\";// const baseURL = \"https://www.pichabay.com/v1/api\";\nfunction fetchCategories(){return _fetchCategories.apply(this,arguments);}function _fetchCategories(){_fetchCategories=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var config,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;config={headers:{\"Content-Type\":\"application/json\"}};_context.next=4;return axios.get(\"\".concat(baseURL,\"/categories\"),config);case 4:res=_context.sent;if(res.data){dispatch({type:\"GET_CATEGORIES\",payload:res.data});}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0.message);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return _fetchCategories.apply(this,arguments);}function fetchPhotographers(){return _fetchPhotographers.apply(this,arguments);}function _fetchPhotographers(){_fetchPhotographers=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:\"GET_PHOTOGRAPHERS\",payload:photographers});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return _fetchPhotographers.apply(this,arguments);}function setLoadingStatus(action){dispatch({type:\"SET_LOADING_STATUS\",payload:action});}function setGlobalInfo(info){dispatch({type:\"SET_USER_INFO\",payload:info});}function checkLoginStatus(){var login=false;if(localStorage.PLUD){var info=readJwt(decryptData(localStorage.PLUD));login=true;setGlobalInfo(info);}dispatch({type:\"LOGIN_STATUS\",payload:login});}function userLogin(_x){return _userLogin.apply(this,arguments);}function _userLogin(){_userLogin=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(inputs){var config,res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setLoadingStatus(true);_context3.prev=1;config={headers:{\"Content-Type\":\"application/json\"}};_context3.next=5;return axios.post(\"\".concat(baseURL,\"/users/login\"),inputs,config);case 5:res=_context3.sent;if(!res.data.error){localStorage.PLUD=encryptData(res.data.token);setTimeout(function(){checkLoginStatus();setLoadingStatus(false);history.push(\"/\");window.location.reload();},200);}_context3.next=11;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](1);case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[1,9]]);}));return _userLogin.apply(this,arguments);}function userRegistration(_x2){return _userRegistration.apply(this,arguments);}function _userRegistration(){_userRegistration=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(inputs){var config,res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:setLoadingStatus(true);_context4.prev=1;config={headers:{\"Content-Type\":\"application/json\"}};_context4.next=5;return axios.post(\"\".concat(baseURL,\"/users/register\"),inputs,config);case 5:res=_context4.sent;if(!res.data.error){localStorage.PLUD=encryptData(res.data.token);setTimeout(function(){checkLoginStatus();setLoadingStatus(false);history.push(\"/\");window.location.reload();},200);}_context4.next=11;break;case 9:_context4.prev=9;_context4.t0=_context4[\"catch\"](1);case 11:case\"end\":return _context4.stop();}}},_callee4,null,[[1,9]]);}));return _userRegistration.apply(this,arguments);}function logOutUser(){return _logOutUser.apply(this,arguments);}function _logOutUser(){_logOutUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:try{localStorage.removeItem(\"PLUD\");window.location.reload();setTimeout(function(){checkLoginStatus();},200);}catch(error){console.log(error.message);}case 1:case\"end\":return _context5.stop();}}},_callee5);}));return _logOutUser.apply(this,arguments);}function searchPhotographer(_x3){return _searchPhotographer.apply(this,arguments);}function _searchPhotographer(){_searchPhotographer=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(data){var config,res;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:setLoadingStatus(true);_context6.prev=1;config={headers:{\"Content-Type\":\"application/json\"}};_context6.next=5;return axios.get(\"\".concat(baseURL,\"/search?category=\").concat(data.category,\"&location=\").concat(data.location,\"&booked_on=\").concat(data.booked_on),config);case 5:res=_context6.sent;if(res){dispatch({type:\"GET_SEARCHED_PHOTOGRAPHERS\",payload:res.data});console.log(res.data);// return true;\n}_context6.next=11;break;case 9:_context6.prev=9;_context6.t0=_context6[\"catch\"](1);case 11:history.push(\"/photographers\");window.location.reload();// setTimeout(setLoadingStatus(false), 17000);\ncase 13:case\"end\":return _context6.stop();}}},_callee6,null,[[1,9]]);}));return _searchPhotographer.apply(this,arguments);}function fetchHomePhotographer(){return _fetchHomePhotographer.apply(this,arguments);}function _fetchHomePhotographer(){_fetchHomePhotographer=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var config,res;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;config={headers:{\"Content-Type\":\"application/json\"}};_context7.next=4;return axios.get(\"\".concat(baseURL,\"/photographers\"),config);case 4:res=_context7.sent;dispatch({type:\"GET_HOME_PHOTOGRAPHERS\",payload:res.data});_context7.next=11;break;case 8:_context7.prev=8;_context7.t0=_context7[\"catch\"](0);console.log(_context7.t0.message);case 11:case\"end\":return _context7.stop();}}},_callee7,null,[[0,8]]);}));return _fetchHomePhotographer.apply(this,arguments);}useEffect(function(){checkLoginStatus();fetchCategories();if(history.location.pathname===\"/\"){fetchHomePhotographer();}fetchPhotographers();return function(){// cleanup;\n};// eslint-disable-next-line\n},[]);return/*#__PURE__*/_jsx(GlobalContext.Provider,{value:{fetchCategories:fetchCategories,fetchPhotographers:fetchPhotographers,userLogin:userLogin,userRegistration:userRegistration,setLoadingStatus:setLoadingStatus,logOutUser:logOutUser,fetchHomePhotographer:fetchHomePhotographer,searchPhotographer:searchPhotographer,home_photographers:state.home_photographers,searched_photographers:state.searched_photographers,photographers:state.photographers,isLoggedIn:state.isLoggedIn,user_info:state.user_info,categories:state.categories,isLoading:state.isLoading},children:children});};","map":{"version":3,"sources":["C:/React/pichabay/src/context/GlobalState.js"],"names":["React","createContext","useReducer","useEffect","AppReducer","axios","encryptData","decryptData","readJwt","addCookie","deleteCookie","Cookies","photographers","createBrowserHistory","initialState","isLoading","isLoggedIn","categories","counties","home_photographers","searched_photographers","user_info","GlobalContext","GlobalProvider","children","history","state","dispatch","baseURL","fetchCategories","config","headers","get","res","data","type","payload","console","log","message","fetchPhotographers","setLoadingStatus","action","setGlobalInfo","info","checkLoginStatus","login","localStorage","PLUD","userLogin","inputs","post","error","token","setTimeout","push","window","location","reload","userRegistration","logOutUser","removeItem","searchPhotographer","category","booked_on","fetchHomePhotographer","pathname"],"mappings":"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","sourcesContent":["import React, { createContext, useReducer, useEffect } from \"react\";\r\nimport AppReducer from \"./AppReducer\";\r\nimport axios from \"axios\";\r\nimport {\r\n  encryptData,\r\n  decryptData,\r\n  readJwt,\r\n  addCookie,\r\n  deleteCookie,\r\n} from \"../utils/helpers\";\r\nimport Cookies from \"js-cookie\";\r\nimport { photographers } from \"../utils/data\";\r\nimport { createBrowserHistory } from \"history\";\r\n\r\nconst initialState = {\r\n  isLoading: false,\r\n  isLoggedIn: null,\r\n  categories: [],\r\n  counties: [],\r\n  home_photographers: [],\r\n  searched_photographers: [],\r\n  photographers: [],\r\n  user_info: {},\r\n};\r\n\r\nexport const GlobalContext = createContext(initialState);\r\n\r\nexport const GlobalProvider = ({ children }) => {\r\n  const history = createBrowserHistory();\r\n\r\n  const [state, dispatch] = useReducer(AppReducer, initialState);\r\n\r\n  const baseURL = \"http://localhost:81/kliks/v1/api\";\r\n  // const baseURL = \"https://www.pichabay.com/v1/api\";\r\n\r\n  async function fetchCategories() {\r\n    try {\r\n      const config = {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      };\r\n\r\n      const res = await axios.get(`${baseURL}/categories`, config);\r\n\r\n      if (res.data) {\r\n        dispatch({\r\n          type: \"GET_CATEGORIES\",\r\n          payload: res.data,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.log(error.message);\r\n    }\r\n  }\r\n\r\n  async function fetchPhotographers() {\r\n    dispatch({\r\n      type: \"GET_PHOTOGRAPHERS\",\r\n      payload: photographers,\r\n    });\r\n  }\r\n\r\n  function setLoadingStatus(action) {\r\n    dispatch({\r\n      type: \"SET_LOADING_STATUS\",\r\n      payload: action,\r\n    });\r\n  }\r\n\r\n  function setGlobalInfo(info) {\r\n    dispatch({\r\n      type: \"SET_USER_INFO\",\r\n      payload: info,\r\n    });\r\n  }\r\n\r\n  function checkLoginStatus() {\r\n    let login = false;\r\n\r\n    if (localStorage.PLUD) {\r\n      const info = readJwt(decryptData(localStorage.PLUD));\r\n      login = true;\r\n      setGlobalInfo(info);\r\n    }\r\n    dispatch({\r\n      type: \"LOGIN_STATUS\",\r\n      payload: login,\r\n    });\r\n  }\r\n\r\n  async function userLogin(inputs) {\r\n    setLoadingStatus(true);\r\n\r\n    try {\r\n      const config = {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      };\r\n\r\n      const res = await axios.post(`${baseURL}/users/login`, inputs, config);\r\n\r\n      if (!res.data.error) {\r\n        localStorage.PLUD = encryptData(res.data.token);\r\n\r\n        setTimeout(function () {\r\n          checkLoginStatus();\r\n\r\n          setLoadingStatus(false);\r\n\r\n          history.push(\"/\");\r\n          window.location.reload();\r\n        }, 200);\r\n      }\r\n    } catch (error) {}\r\n  }\r\n\r\n  async function userRegistration(inputs) {\r\n    setLoadingStatus(true);\r\n\r\n    try {\r\n      const config = {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      };\r\n\r\n      const res = await axios.post(`${baseURL}/users/register`, inputs, config);\r\n\r\n      if (!res.data.error) {\r\n        localStorage.PLUD = encryptData(res.data.token);\r\n\r\n        setTimeout(function () {\r\n          checkLoginStatus();\r\n\r\n          setLoadingStatus(false);\r\n\r\n          history.push(\"/\");\r\n          window.location.reload();\r\n        }, 200);\r\n      }\r\n    } catch (error) {}\r\n  }\r\n\r\n  async function logOutUser() {\r\n    try {\r\n      localStorage.removeItem(\"PLUD\");\r\n      window.location.reload();\r\n\r\n      setTimeout(function () {\r\n        checkLoginStatus();\r\n      }, 200);\r\n    } catch (error) {\r\n      console.log(error.message);\r\n    }\r\n  }\r\n\r\n  async function searchPhotographer(data) {\r\n    setLoadingStatus(true);\r\n\r\n    try {\r\n      const config = {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      };\r\n\r\n      const res = await axios.get(\r\n        `${baseURL}/search?category=${data.category}&location=${data.location}&booked_on=${data.booked_on}`,\r\n        config\r\n      );\r\n\r\n      if (res) {\r\n        dispatch({\r\n          type: \"GET_SEARCHED_PHOTOGRAPHERS\",\r\n          payload: res.data,\r\n        });\r\n\r\n        console.log(res.data);\r\n        // return true;\r\n      }\r\n    } catch (error) {\r\n      // console.log(error.message);\r\n    }\r\n\r\n    history.push(\"/photographers\");\r\n    window.location.reload();\r\n\r\n    // setTimeout(setLoadingStatus(false), 17000);\r\n  }\r\n\r\n  async function fetchHomePhotographer() {\r\n    try {\r\n      const config = {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      };\r\n\r\n      const res = await axios.get(`${baseURL}/photographers`, config);\r\n\r\n      dispatch({\r\n        type: \"GET_HOME_PHOTOGRAPHERS\",\r\n        payload: res.data,\r\n      });\r\n    } catch (error) {\r\n      console.log(error.message);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    checkLoginStatus();\r\n\r\n    fetchCategories();\r\n\r\n    if (history.location.pathname === \"/\") {\r\n      fetchHomePhotographer();\r\n    }\r\n\r\n    fetchPhotographers();\r\n\r\n    return () => {\r\n      // cleanup;\r\n    };\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  return (\r\n    <GlobalContext.Provider\r\n      value={{\r\n        fetchCategories,\r\n        fetchPhotographers,\r\n        userLogin,\r\n        userRegistration,\r\n        setLoadingStatus,\r\n        logOutUser,\r\n        fetchHomePhotographer,\r\n        searchPhotographer,\r\n\r\n        home_photographers: state.home_photographers,\r\n        searched_photographers: state.searched_photographers,\r\n        photographers: state.photographers,\r\n        isLoggedIn: state.isLoggedIn,\r\n        user_info: state.user_info,\r\n        categories: state.categories,\r\n        isLoading: state.isLoading,\r\n      }}\r\n    >\r\n      {children}\r\n    </GlobalContext.Provider>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}